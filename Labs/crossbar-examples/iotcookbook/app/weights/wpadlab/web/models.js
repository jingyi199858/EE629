// transform to units of 0.5 Kaesten

params_model1 = {
'A0': [95.848065712341779,
57.032814042098209,
1764.5904494757251,
435.92186791749396],
'A1': [128.56762208699021,
-11.380319227995484,
122.05944140193783,
19.048998297515116],
'A2': [181.76143053727156,
-117.68360457435577,
34.545688484235406,
15.763720159554804],
'A3': [133.63762724427815,
28.026724373199375,
92.727258995959318,
39.821232916028038]};

function model1 (sensor, y) {
    var a = params_model1[sensor][0];
    var b = params_model1[sensor][1];
    var c = params_model1[sensor][2];
    var d = params_model1[sensor][3];

    var x = (Math.exp((y - b) / a) - d) / c;

    return x;
}

params_model2 =
[[-0.84095693327755106,
  -0.8555280101698387,
  -0.86740689627310907,
  -0.75379988603016423],
 [-0.55403866439951344,
  -0.24914321492523414,
  -0.11372052480074477,
  -0.57320198421601565],
 [0.099091959277148284,
  -0.29621544962693624,
  -0.37415509108887351,
  0.092196092671921276],
 [0.28432207234535112,
  -0.36469268156398749,
  0.50724431506418377,
  -0.22105992741310987],
 [0.034839834608043081,
  0.62214402283062742,
  -0.019091934760316256,
  0.42492659884672124]]

params_model2b =
[[0.14381581017582307,
  -0.16421294454497481,
  -0.17543025905124576,
  0.082173566951153132],
 [0.0090292121114863861,
  -0.0069278210283592592,
  -0.0047886204245969457,
  -0.0029647384239719688],
 [-0.00014054496072987059,
  -0.00076106916981090987,
  -0.0020040959784665639,
  0.0012269473841927058],
 [-0.0082443173435014661,
  0.0046031309905016108,
  0.011672697631687948,
  -0.0069803753859394796],
 [-0.050520768460331836,
  0.03285477349822967,
  0.023052753822433589,
  0.0052827373251393816]]

function model2 (values) {
    var sums = [];

    for (var i = 0; i < params_model2b.length; ++i) {
       var row = params_model2b[i];
       var sum = 0;
       for (var k = 0; k < row.length; ++k) {
          sum += values[k + 0] * row[k];
       }
       sums.push(sum);
    }

    var max_val = null;
    var max_ind = null;
    for (var k = 0; k < sums.length; ++k) {
       var s = sums[k];
       if (max_val === null || s > max_val) {
          max_val = s;
          max_ind = k;
       }
    }

    return max_ind;
}
